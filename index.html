<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Palworld Mount Dashboard & Tier List</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        /* Custom styles for chart container sizing and smooth view transitions */
        .view-content {
            animation: fadeIn 0.4s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        th {
            cursor: pointer;
            user-select: none;
        }
        th:hover {
            background-color: #e5e7eb;
        }
        .table-container {
            overflow-x: auto;
        }
        .sticky-header th {
            position: sticky;
            top: 0;
            z-index: 10;
        }
    </style>
    <!-- Chosen Palette: Warm Neutrals & Indigo Accents -->
    <!-- Application Structure Plan: The SPA uses a Tabbed Dashboard structure with two main views: 'Home' for high-level statistical summaries and 'Tier List' for detailed, interactive data exploration. This structure provides immediate context (Home) and deep-dive functionality (Tier List) within a fast, single-page experience, optimizing for both synthesis and analysis. -->
    <!-- Visualization & Content Choices: Home View: Mount Type Distribution -> Goal: Inform proportions -> Viz: Donut Chart (Chart.js/Canvas) -> Interaction: Hover tooltip -> Justification: Clearly shows the primary movement type focus (Ground) versus the others; Key Stats -> Goal: Inform -> Viz: Styled Stat Cards (HTML/Tailwind) -> Interaction: None -> Justification: Quick, digestible key findings; Tier List View: Detailed Pal Data -> Goal: Compare/Organize -> Viz: Interactive Table (HTML/JS) -> Interaction: Search, filter, and column sorting -> Justification: Allows users to non-linearly explore the full dataset based on their specific priorities (e.g., fastest Flying Pal, or all Feybreak Pals). -> Library/Method: Chart.js for visualization, Vanilla JS for SPA logic and table interactivity. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="min-h-screen bg-gray-100 antialiased">

    <div class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">

        <header class="bg-white rounded-xl shadow-xl mb-6">
            <div class="text-center py-6">
                <h1 class="text-4xl font-extrabold text-gray-900">
                    Palworld Mount Mobility Index
                </h1>
                <p class="mt-2 text-xl text-indigo-600 font-medium">
                    Analyze, Compare, and Rank Rideable Pals
                </p>
            </div>
            
            <!-- Navigation Tabs -->
            <nav class="border-t border-gray-200">
                <div class="flex justify-center space-x-4 p-2">
                    <button id="nav-home" onclick="showView('home')"
                        class="px-4 py-2 text-lg font-semibold border-b-2 transition duration-150 ease-in-out text-gray-700 hover:text-indigo-600 hover:border-indigo-600 focus:outline-none">
                        Home & Overview
                    </button>
                    <button id="nav-tierlist" onclick="showView('tierlist')"
                        class="px-4 py-2 text-lg font-semibold border-b-2 transition duration-150 ease-in-out text-gray-700 hover:text-indigo-600 hover:border-indigo-600 focus:outline-none">
                        Full Tier List
                    </button>
                </div>
            </nav>
        </header>

        <!-- MAIN CONTENT CONTAINER -->
        <main id="main-content">
            
            <!-- 1. HOME VIEW (Dashboard Overview) -->
            <section id="homeView" class="view-content hidden">
                <div class="bg-white p-6 rounded-xl shadow-xl mb-6">
                    <h2 class="text-3xl font-bold text-gray-800 mb-4 border-b pb-2">Overview and Key Findings</h2>
                    <p class="text-gray-600 mb-6">
                        This section provides a synthesis of the Palworld mount data, highlighting key metrics, the fastest Pals by category, and the distribution of movement types. Use this dashboard to quickly grasp the mobility landscape before diving into the detailed rankings. The primary focus is on sprint speed and utility attributes like jump type.
                    </p>

                    <!-- Stat Cards -->
                    <div id="statCards" class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                        <!-- Stat Cards will be dynamically populated -->
                    </div>

                    <!-- Chart & Summary -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        
                        <div>
                            <h3 class="text-2xl font-semibold text-gray-800 mb-3">Mount Type Distribution</h3>
                            <p class="text-gray-500 mb-4">
                                This chart illustrates the current breakdown of rideable Pals by their primary movement type (Ground, Flying, or Water), showing the game's focus on ground-based travel options.
                            </p>
                            <div class="chart-container bg-gray-50 p-4 rounded-lg shadow-inner">
                                <canvas id="typeChart"></canvas>
                            </div>
                        </div>

                        <div>
                            <h3 class="text-2xl font-semibold text-gray-800 mb-3">Top Pal Summary</h3>
                            <div id="topPalSummary" class="space-y-4">
                                <!-- Top Pal details will be dynamically populated -->
                            </div>
                            <div class="mt-6 p-4 bg-indigo-50 border-l-4 border-indigo-500 rounded-md">
                                <p class="font-medium text-indigo-700">
                                    <span class="font-bold">Mobility Insight:</span> While Jetragon is the undisputed speed king, **Paladius** holds the title for the most agile Ground Pal due to its unique Triple Jump ability, offering superior vertical traversal compared to other high-speed mounts like Necromus (Double Jump).
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 2. TIER LIST VIEW (Original Table Content) -->
            <section id="tierlistView" class="view-content hidden">
                <div class="bg-white p-6 rounded-xl shadow-xl mb-6">
                    <h2 class="text-3xl font-bold text-gray-800 mb-4 border-b pb-2">Full Mount Speed Tier List</h2>
                    <p class="text-gray-600 mb-6">
                        The interactive table below contains the complete dataset. Use the search bar and filters to quickly isolate specific Pals, speed ranges, or movement types. Click any column header to sort the data instantly.
                    </p>
                    
                    <!-- Control Panel (Search and Filters) -->
                    <div class="flex flex-col md:flex-row gap-4 mb-6">
                        <input type="text" id="searchInput" placeholder="Search Pal Name or Type..."
                            class="flex-1 p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition duration-150 shadow-sm"
                            onkeyup="filterTable()">

                        <select id="typeFilter" onchange="filterTable()"
                            class="p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 shadow-sm md:w-48">
                            <option value="">All Movement Types</option>
                            <option value="Flying">Flying</option>
                            <option value="Ground">Ground</option>
                            <option value="Water">Water</option>
                        </select>

                        <select id="releaseFilter" onchange="filterTable()"
                            class="p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 shadow-sm md:w-48">
                            <option value="">All Releases</option>
                            <option value="Original">Original</option>
                            <option value="Sakurajima">Sakurajima</option>
                            <option value="Feybreak">Feybreak</option>
                        </select>
                    </div>

                    <!-- Table Container -->
                    <div class="table-container shadow-inner ring-1 ring-gray-200">
                        <table class="min-w-full divide-y divide-gray-300 bg-white">
                            <thead class="bg-indigo-600 text-white sticky-header">
                                <tr>
                                    <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold rounded-tl-lg" onclick="sortTable('name', 'string')">
                                        Name <span id="sort-name" class="ml-1 text-xs opacity-70"></span>
                                    </th>
                                    <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold" onclick="sortTable('type', 'string')">
                                        Type <span id="sort-type" class="ml-1 text-xs opacity-70"></span>
                                    </th>
                                    <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold" onclick="sortTable('speed', 'number')">
                                        Base Speed <span id="sort-speed" class="ml-1 text-xs opacity-70"></span>
                                    </th>
                                    <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold hidden sm:table-cell" onclick="sortTable('starUp', 'string')">
                                        Star Up Speed? <span id="sort-starUp" class="ml-1 text-xs opacity-70"></span>
                                    </th>
                                    <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold hidden md:table-cell" onclick="sortTable('jump', 'string')">
                                        Jump Type <span id="sort-jump" class="ml-1 text-xs opacity-70"></span>
                                    </th>
                                    <th scope="col" class="relative py-3.5 pl-3 pr-4 text-left text-sm font-semibold rounded-tr-lg" onclick="sortTable('release', 'string')">
                                        Release <span id="sort-release" class="ml-1 text-xs opacity-70"></span>
                                    </th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200" id="palTableBody">
                                <!-- Table rows will be inserted here by JavaScript -->
                            </tbody>
                            <tfoot id="emptyState" class="hidden">
                                <tr>
                                    <td colspan="6" class="p-8 text-center text-gray-500 text-lg italic">No Pals match your current filters or search query.</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </section>

        </main>

        <!-- LEGEND/FOOTER -->
        <footer class="bg-white p-6 rounded-xl shadow-xl mt-6 text-gray-700">
            <h2 class="text-xl font-bold text-gray-900 mb-3">Legend & Notes</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                <ul class="list-disc list-inside space-y-1">
                    <li><strong class="text-indigo-600">Base Sprint Speed</strong> is the raw number used by the game. Higher is faster.</li>
                    <li><strong class="text-indigo-600">Speed Increase on Star Up?</strong> refers to the condensation process. "Yes" means condensing will make the mount faster.</li>
                    <li><strong class="text-indigo-600">Jump Type (Ground Only)</strong>: N/A for Flying/Water. Ground Pals can have Single, Double, or Triple jumps.</li>
                </ul>
                <ul class="list-disc list-inside space-y-1">
                    <li><strong class="text-indigo-600">Original:</strong> Pals from the initial Early Access launch.</li>
                    <li><strong class="text-indigo-600">Sakurajima:</strong> Pals introduced in the V0.2.0 expansion.</li>
                    <li><strong class="text-indigo-600">Feybreak:</strong> Pals introduced in the V0.4.0 expansion.</li>
                    <li><strong class="text-indigo-600">Water Mounts</strong> are essential for open ocean traversal.</li>
                </ul>
            </div>
        </footer>
    </div>

    <script>
        const palworldData = [
            { name: "Jetragon", type: "Flying", speed: 3300, starUp: "Yes", jump: "N/A", release: "Original" },
            { name: "Xenolord", type: "Flying", speed: 1700, starUp: "Yes", jump: "N/A", release: "Feybreak" },
            { name: "Necromus", type: "Ground", speed: 1600, starUp: "Yes", jump: "Double Jump", release: "Original" },
            { name: "Frostallion", type: "Flying", speed: 1500, starUp: "Yes", jump: "N/A", release: "Original" },
            { name: "Paladius", type: "Ground", speed: 1400, starUp: "Yes", jump: "Triple Jump", release: "Original" },
            { name: "Faleris", type: "Flying", speed: 1400, starUp: "Yes", jump: "N/A", release: "Original" },
            { name: "Inzami", type: "Flying", speed: 1350, starUp: "Yes", jump: "N/A", release: "Sakurajima" },
            { name: "Pyrin / Pyrin Noct", type: "Ground", speed: 1300, starUp: "Yes", jump: "Single Jump", release: "Original" },
            { name: "Ragnahawk", type: "Flying", speed: 1300, starUp: "Yes", jump: "N/A", release: "Original" },
            { name: "Sleipnir", type: "Ground", speed: 1250, starUp: "Yes", jump: "Double Jump", release: "Sakurajima" },
            { name: "Shadowbeak", type: "Flying", speed: 1200, starUp: "Yes", jump: "N/A", release: "Original" },
            { name: "Beakon", type: "Flying", speed: 1200, starUp: "Yes", jump: "N/A", release: "Original" },
            { name: "Tsurugi", type: "Ground", speed: 1200, starUp: "Yes", jump: "Double Jump", release: "Sakurajima" },
            { name: "Anubis", type: "Ground", speed: 1150, starUp: "Yes", jump: "Double Jump", release: "Original" },
            { name: "Rayhound", type: "Ground", speed: 1150, starUp: "Yes", jump: "Double Jump", release: "Original" },
            { name: "Suzaku / Suzaku Aqua", type: "Flying", speed: 1100, starUp: "Yes", jump: "N/A", release: "Original" },
            { name: "Astegon", type: "Flying", speed: 1050, starUp: "Yes", jump: "N/A", release: "Original" },
            { name: "Direhowl", type: "Ground", speed: 1050, starUp: "Yes", jump: "Single Jump", release: "Original" },
            { name: "Fenglope", type: "Ground", speed: 1050, starUp: "Yes", jump: "Double Jump", release: "Original" },
            { name: "Blazehowl / Blazehowl Noct", type: "Ground", speed: 1000, starUp: "Yes", jump: "Single Jump", release: "Original" },
            { name: "Kitsun", type: "Ground", speed: 1000, starUp: "Yes", jump: "Single Jump", release: "Original" },
            { name: "Univolt", type: "Ground", speed: 1000, starUp: "Yes", jump: "Single Jump", release: "Original" },
            { name: "Kotoshiro", type: "Ground", speed: 950, starUp: "Yes", jump: "Single Jump", release: "Sakurajima" },
            { name: "Loupe", type: "Ground", speed: 950, starUp: "Yes", jump: "Double Jump", release: "Feybreak" },
            { name: "Eikthyrdeer / Eikthyrdeer Aqua", type: "Ground", speed: 900, starUp: "Yes", jump: "Double Jump", release: "Original" },
            { name: "Grintale", type: "Ground", speed: 900, starUp: "Yes", jump: "Single Jump", release: "Original" },
            { name: "Maraith", type: "Ground", speed: 900, starUp: "Yes", jump: "Single Jump", release: "Original" },
            { name: "Arsox", type: "Ground", speed: 850, starUp: "Yes", jump: "Single Jump", release: "Original" },
            { name: "Jormuntide / Jormuntide Ignis", type: "Water", speed: 850, starUp: "Yes", jump: "N/A", release: "Original" },
            { name: "Mammorest / Mammorest Cryst", type: "Ground", speed: 850, starUp: "Yes", jump: "Single Jump", release: "Original" },
            { name: "Vanwyrm / Vanwyrm Cryst", type: "Flying", speed: 850, starUp: "Yes", jump: "N/A", release: "Original" },
            { name: "Azurobe", type: "Water", speed: 800, starUp: "Yes", jump: "N/A", release: "Original" },
            { name: "Chillet", type: "Ground", speed: 800, starUp: "Yes", jump: "Single Jump", release: "Original" },
            { name: "Helzephyr", type: "Flying", speed: 800, starUp: "Yes", jump: "N/A", release: "Original" },
            { name: "Surfent / Surfent Terra", type: "Water", speed: 800, starUp: "Yes", jump: "N/A", release: "Original" },
            { name: "Nitewing", type: "Flying", speed: 750, starUp: "Yes", jump: "N/A", release: "Original" },
            { name: "Melpaca", type: "Ground", speed: 700, starUp: "Yes", jump: "Single Jump", release: "Original" },
            { name: "Mossanda / Mossanda Lux", type: "Ground", speed: 700, starUp: "Yes", jump: "Single Jump", release: "Original" },
            { name: "Relaxaurus / Relaxaurus Lux", type: "Ground", speed: 700, starUp: "Yes", jump: "Single Jump", release: "Original" },
            { name: "Rushoar", type: "Ground", speed: 700, starUp: "Yes", jump: "Single Jump", release: "Original" },
            { name: "Wumpo / Wumpo Botan", type: "Ground", speed: 700, starUp: "Yes", jump: "Single Jump", release: "Original" },
            { name: "Cremis", type: "Ground", speed: 600, starUp: "Yes", jump: "Single Jump", release: "Original" },
            { name: "Galeclaw", type: "Flying", speed: 600, starUp: "Yes", jump: "N/A", release: "Original" },
            { name: "Kingpaca / Ice Kingpaca", type: "Ground", speed: 600, starUp: "Yes", jump: "Single Jump", release: "Original" },
            { name: "Kelpsea / Kelpsea Ignis", type: "Water", speed: 550, starUp: "Yes", jump: "N/A", release: "Original" }
        ];

        let currentData = [...palworldData];
        let sortColumn = 'speed';
        let sortDirection = 'desc';
        let typeChartInstance = null;
        let currentView = 'home';

        // --- Core SPA Logic ---

        function updateNavigation(activeView) {
            document.querySelectorAll('[id^="nav-"]').forEach(button => {
                const isActive = button.id === `nav-${activeView}`;
                button.classList.toggle('border-indigo-600', isActive);
                button.classList.toggle('text-indigo-600', isActive);
                button.classList.toggle('text-gray-700', !isActive);
                button.classList.toggle('hover:text-indigo-600', !isActive);
            });
        }

        function showView(viewName) {
            currentView = viewName;
            ['homeView', 'tierlistView'].forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.classList.add('hidden');
                }
            });

            const targetElement = document.getElementById(`${viewName}View`);
            if (targetElement) {
                targetElement.classList.remove('hidden');
                updateNavigation(viewName);
            }

            if (viewName === 'tierlist') {
                sortAndRender('number');
            } else if (viewName === 'home') {
                if (typeChartInstance) {
                    typeChartInstance.destroy();
                }
                renderOverview();
                renderTypeChart();
            }
        }

        // --- Home View Rendering Functions ---

        function calculateStats() {
            const total = palworldData.length;
            const typeCounts = palworldData.reduce((acc, pal) => {
                acc[pal.type] = (acc[pal.type] || 0) + 1;
                return acc;
            }, {});

            const flyingPals = palworldData.filter(p => p.type === 'Flying').sort((a, b) => b.speed - a.speed);
            const groundPals = palworldData.filter(p => p.type === 'Ground').sort((a, b) => b.speed - a.speed);
            const waterPals = palworldData.filter(p => p.type === 'Water').sort((a, b) => b.speed - a.speed);

            return {
                total,
                typeCounts,
                fastestOverall: palworldData.sort((a, b) => b.speed - a.speed)[0],
                fastestFlying: flyingPals[0],
                fastestGround: groundPals[0],
                fastestWater: waterPals[0]
            };
        }

        function renderOverview() {
            const stats = calculateStats();
            const statCards = document.getElementById('statCards');
            statCards.innerHTML = '';
            
            const cardData = [
                { title: "Total Mounts", value: stats.total, icon: "ðŸ‘¤", color: "indigo" },
                { title: "Fastest Overall", value: stats.fastestOverall.name, icon: "ðŸš€", color: "red" },
                { title: "Fastest Ground", value: stats.fastestGround.name, icon: "ðŸƒ", color: "green" },
                { title: "Fastest Flying", value: stats.fastestFlying.name, icon: "ðŸ¦…", color: "sky" }
            ];

            cardData.forEach(card => {
                statCards.innerHTML += `
                    <div class="bg-gray-50 p-4 rounded-lg shadow-md border-b-4 border-${card.color}-500 transition hover:shadow-lg">
                        <p class="text-xs font-medium text-gray-500 uppercase">${card.title}</p>
                        <div class="flex items-center mt-1">
                            <span class="text-2xl mr-2">${card.icon}</span>
                            <p class="text-xl font-extrabold text-gray-900 truncate">${card.value}</p>
                        </div>
                    </div>
                `;
            });

            const topPalSummary = document.getElementById('topPalSummary');
            topPalSummary.innerHTML = `
                <div class="p-4 border-l-4 border-red-500 bg-red-50 rounded-md">
                    <p class="font-bold text-red-700">Top Speed King (Flying)</p>
                    <p class="text-gray-800 text-lg">${stats.fastestOverall.name} (${stats.fastestOverall.speed} Base Speed)</p>
                </div>
                <div class="p-4 border-l-4 border-green-500 bg-green-50 rounded-md">
                    <p class="font-bold text-green-700">Top Ground Racer</p>
                    <p class="text-gray-800 text-lg">${stats.fastestGround.name} (${stats.fastestGround.speed} Base Speed)</p>
                    <p class="text-sm text-gray-500">Jump: ${stats.fastestGround.jump}</p>
                </div>
                <div class="p-4 border-l-4 border-blue-500 bg-blue-50 rounded-md">
                    <p class="font-bold text-blue-700">Top Water Navigator</p>
                    <p class="text-gray-800 text-lg">${stats.fastestWater.name} (${stats.fastestWater.speed} Base Speed)</p>
                </div>
            `;
        }

        function renderTypeChart() {
            const stats = calculateStats();
            const ctx = document.getElementById('typeChart').getContext('2d');
            const data = {
                labels: ['Ground Mounts', 'Flying Mounts', 'Water Mounts'],
                datasets: [{
                    label: 'Mounts Count',
                    data: [stats.typeCounts.Ground, stats.typeCounts.Flying, stats.typeCounts.Water],
                    backgroundColor: [
                        '#10b981', // Green-500 (Ground)
                        '#3b82f6', // Blue-500 (Flying)
                        '#6366f1'  // Indigo-500 (Water)
                    ],
                    hoverOffset: 16
                }]
            };

            typeChartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                font: { size: 14 }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed !== null) {
                                        label += context.parsed;
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }


        // --- Tier List View (Table) Functions ---

        function renderTable(data) {
            const tbody = document.getElementById('palTableBody');
            const emptyState = document.getElementById('emptyState');
            tbody.innerHTML = '';

            if (data.length === 0) {
                emptyState.classList.remove('hidden');
                return;
            } else {
                emptyState.classList.add('hidden');
            }

            data.forEach((pal, index) => {
                const row = tbody.insertRow();
                row.className = index % 2 === 0 ? 'bg-white' : 'bg-gray-50';

                const getColorForType = (type) => {
                    switch (type) {
                        case 'Flying': return 'text-sky-700 bg-sky-100/70 font-bold';
                        case 'Ground': return 'text-green-700 bg-green-100/70 font-bold';
                        case 'Water': return 'text-blue-700 bg-blue-100/70 font-bold';
                        default: return 'text-gray-800';
                    }
                };

                const cells = [
                    pal.name,
                    `<span class="px-2 py-0.5 rounded-full text-xs ${getColorForType(pal.type)}">${pal.type}</span>`,
                    `<span class="font-mono text-gray-900 font-bold">${pal.speed}</span>`,
                    pal.starUp,
                    pal.jump,
                    pal.release
                ];

                cells.forEach((content, cellIndex) => {
                    const cell = row.insertCell();
                    cell.innerHTML = content;
                    cell.className = `whitespace-nowrap px-3 py-4 text-sm text-gray-500`;

                    if (cellIndex === 3) cell.classList.add('hidden', 'sm:table-cell');
                    if (cellIndex === 4) cell.classList.add('hidden', 'md:table-cell');
                    if (cellIndex === 0) cell.classList.add('font-semibold', 'text-gray-900');
                });
            });
        }

        function filterTable() {
            const searchInput = document.getElementById('searchInput').value.toLowerCase();
            const typeFilter = document.getElementById('typeFilter').value;
            const releaseFilter = document.getElementById('releaseFilter').value;

            const filteredData = palworldData.filter(pal => {
                const searchMatch = pal.name.toLowerCase().includes(searchInput) || pal.type.toLowerCase().includes(searchInput);
                const typeMatch = !typeFilter || pal.type === typeFilter;
                const releaseMatch = !releaseFilter || pal.release === releaseFilter;
                return searchMatch && typeMatch && releaseMatch;
            });

            currentData = filteredData;
            sortAndRender();
        }

        function sortTable(column, type) {
            if (sortColumn === column) {
                sortDirection = sortDirection === 'asc' ? 'desc' : 'asc';
            } else {
                sortColumn = column;
                sortDirection = column === 'speed' ? 'desc' : 'asc';
            }

            sortAndRender(type);
        }

        function sortAndRender(type = 'number') {
            document.querySelectorAll('[id^="sort-"]').forEach(span => span.textContent = '');

            currentData.sort((a, b) => {
                let valA = a[sortColumn];
                let valB = b[sortColumn];

                if (type === 'number') {
                    valA = Number(valA);
                    valB = Number(valB);
                } else if (type === 'string') {
                    valA = String(valA).toLowerCase();
                    valB = String(valB).toLowerCase();
                }

                if (valA < valB) return sortDirection === 'asc' ? -1 : 1;
                if (valA > valB) return sortDirection === 'asc' ? 1 : -1;
                return 0;
            });

            document.getElementById(`sort-${sortColumn}`).textContent = sortDirection === 'asc' ? 'â–²' : 'â–¼';
            renderTable(currentData);
        }

        // --- Initialization ---

        window.onload = () => {
            // Show the Home view by default on load
            showView('home');
        };

    </script>
</body>
</html>